# è®¡åˆ’ï¼šå°† divergence-detector é›†æˆåˆ° kline-research/projects

  

## ç¬¬ä¸€é˜¶æ®µï¼šæ¢ç´¢æ€»ç»“

  

### divergence-detector é¡¹ç›®ç‰¹å¾

- **ç±»å‹**ï¼šè·¨èµ„äº§èƒŒç¦»æ£€æµ‹å·¥å…·ï¼ˆBTC/ETH 4Hï¼‰

- **æ ¸å¿ƒè¾“å‡º**ï¼šèƒŒç¦»æ£€æµ‹ + å®Œæ•´å‡ºåœºè§„åˆ™ + å›æµ‹å¼•æ“

- **æ–‡ä»¶ç»“æ„**ï¼šscripts/ (4ä¸ªPythonè„šæœ¬) + references/ (2ä¸ªè§„åˆ™æ–‡æ¡£) + output/ (ç»“æœæ•°æ®)

- **å…³é”®è„šæœ¬**ï¼š

- fetch_data.py - Bybit API æ•°æ®è·å–

- detect_divergence.py - èƒŒç¦»æ£€æµ‹å¼•æ“

- generate_report.py - Excel æŠ¥å‘Šç”Ÿæˆ

- divergenceplus.py - å®Œæ•´äº¤æ˜“è§„åˆ™ + å›æµ‹

  

### kline-research é¡¹ç›®è§„èŒƒ

- **æ¶æ„**ï¼šé…ç½®é©±åŠ¨ (config.json) + é€šç”¨åº“ (src/) + å¤šä¸ªå­é¡¹ç›® (projects/)

- **å­é¡¹ç›®æ¨¡æ¿**ï¼š

- README.mdï¼ˆç ”ç©¶æ‘˜è¦+ç»“è®ºï¼‰

- config.jsonï¼ˆç­–ç•¥é…ç½®ï¼‰

- results/ï¼ˆå›æµ‹ç»“æœï¼‰

- chat-archive/ï¼ˆèŠå¤©å­˜æ¡£+ç´¢å¼•ï¼‰

- å¯é€‰ï¼šscripts/ï¼ˆç‹¬ç«‹è„šæœ¬ï¼‰

- **å‘½åè§„èŒƒ**ï¼š`<symbol>-<interval>-<strategy_name>`

- **è§„èŒƒæ–‡æ¡£**ï¼šrules/MODELING_RULES.mdï¼ˆRULE-0 åˆ° RULE-10ï¼‰

  

### ç°æœ‰å‚è€ƒé¡¹ç›®

1. **btc-4h-macd-divergence**ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼šç‹¬ç«‹Pythonè„šæœ¬ + config.json

2. **btc-eth-4h-cross-divergence**ï¼ˆå¤æ‚ç‰ˆï¼‰ï¼šå¤šè„šæœ¬ + scriptsç›®å½• + references

  

---

  

## ç”¨æˆ·å†³ç­–æ€»ç»“ âœ“

  

| é€‰é¡¹ | å†³ç­– | å«ä¹‰ |

|-----|------|------|

| **é›†æˆèŒƒå›´** | ä¸æ ¸å¿ƒåº“é›†æˆ | éœ€æ•´åˆ kline-research/src/ çš„é€šç”¨åº“ï¼ˆindicators, backtest_engineï¼‰ |

| **è§„èŒƒåˆè§„** | éœ€è¦è¡¥å……éªŒè¯ | divergence-detector éœ€æŒ‰ RULE-1ï½RULE-10 é€æ¡éªŒè¯ï¼Œè¡¥å……ç¼ºå¤±æ–‡æ¡£ |

| **é¡¹ç›®å‘½å** | `btc-eth-4h-cross-divergence` | ç¬¦åˆå‘½åè§„èŒƒ `<symbol>-<interval>-<strategy>` |

| **ç»“æœå¤„ç†** | åˆ é™¤ï¼Œä»é›¶å¼€å§‹ | ä¸ä¿ç•™ output/ æ—§æ•°æ®ï¼Œé›†æˆåé‡æ–°è¿è¡Œè„šæœ¬ |

  

---

  

## ç¬¬äºŒé˜¶æ®µï¼šä»£ç åˆ†ææˆæœ

  

### å…¼å®¹æ€§è¯¦ç»†è¯„ä¼°

  

#### å¯æ¨¡å—åŒ–å¤ç”¨ï¼ˆçº¦50%ä»£ç ï¼‰

âœ… **ç«‹å³å¯ç”¨**ï¼š

1. Swing point æ£€æµ‹ï¼ˆfind_swing_highs / find_swing_lowsï¼‰

2. é¢ˆçº¿è®¡ç®—ï¼ˆneckline = min/max between two swingsï¼‰

3. äº¤æ˜“æˆæœ¬å¤„ç†ï¼ˆfee_pct + slippage_pct é€»è¾‘ç›¸åŒï¼‰

4. åŸºæœ¬æŠ¥å‘Šæ ¼å¼ï¼ˆå‹ç‡ã€æœŸæœ›å€¼ã€å¹³å‡ç›ˆè™§ï¼‰

  

âš ï¸ **éœ€è¦åŒ…è£…/æ”¹é€ **ï¼š

1. failure_price è®¡ç®—ï¼ˆé«˜åº¦å®šåˆ¶ï¼Œä»…é€‚ç”¨èƒŒç¦»ï¼‰

2. rejection ç›‘æ§é€»è¾‘ï¼ˆéœ€æ–°å¢å‡ºåœºæ¡ä»¶ç±»å‹ï¼‰

3. measured_move æ­¢ç›ˆï¼ˆéœ€æ‰©å±• TP è®¡ç®—æ–¹å¼ï¼‰

4. è·¨èµ„äº§èƒŒç¦»æ£€æµ‹ï¼ˆBTC+ETH åŒæ­¥é€»è¾‘ï¼Œkline-research è®¾è®¡ä¸ºå•èµ„äº§ï¼‰

  

#### ä¸å…¼å®¹/éš¾ä»¥å¤ç”¨ï¼ˆçº¦50%ï¼‰

âŒ **æ ¹æœ¬å·®å¼‚**ï¼š

1. **è·¨èµ„äº§åè°ƒ**ï¼šdivergence-detector çš„æ ¸å¿ƒæ˜¯ 2-symbol åŒæ­¥ï¼Œkline-research æ¯ä¸ª DataFrame ä¸€ä¸ªä¿¡å·

- éœ€ä¿®æ”¹ detect_bullish_macd_divergence() ç­¾åæ”¯æŒå¤šä¸ª DataFrame

- å·¥ä½œé‡ï¼šå¤§ï¼ˆé‡æ„æ ¸å¿ƒä¿¡å·æ£€æµ‹æµç¨‹ï¼‰

  

2. **å‚æ•°æ¨¡å—åŒ–ç¼ºé™·** - divergence-detectorï¼š

- 80% å‚æ•°åœ¨ä»£ç é‡Œç¡¬ç¼–ç æˆ–ä»…æ”¯æŒ CLI argsï¼ˆæ—  JSON configï¼‰

- eth_lookback_daysã€eth_match_tolerance æ— æ³•å¤–éƒ¨ä¼ å…¥

- ä¸ kline-research çš„"é…ç½®å³ä»£ç "ç†å¿µå†²çª

  

3. **è¿›å‡ºåœºé€»è¾‘å®šåˆ¶åŒ–**ï¼š

- divergenceplus.py å®Œå…¨å›´ç»•èƒŒç¦»è®¾è®¡

- backtest_engine.py è®¾è®¡ä¸ºé€šç”¨ï¼ˆå¤šç§æ­¢æŸé€‰é¡¹ã€çµæ´»å‡ºåœºï¼‰

- å¤ç”¨éœ€å®Œå…¨é‡å†™

  

### å‚æ•°æ¨¡å—åŒ–å¯¹æ¯”

  

| å‚æ•° | divergence-detector | kline-research | å·®å¼‚ |

|------|--------------------|-----------------|----|

| swing_lookback | ç¡¬ç¼–ç  + CLI | âœ… JSON config | âŒ ä¸å…¼å®¹ |

| max_divergence_days | ç¡¬ç¼–ç  + CLI | âœ… JSON config | âŒ ä¸å…¼å®¹ |

| eth_lookback_days | ä»…ç¡¬ç¼–ç  | âœ… JSON config | âŒ æ— æ³•ä¼ å…¥ |

| failure_price ç®—æ³• | å®šåˆ¶é€»è¾‘ï¼ˆbackgroundï¼‰ | ä¸å­˜åœ¨ | âŒ éœ€æ–°å¢ |

| æ­¢æŸç±»å‹ | å•ä¸€ï¼ˆfailure_price Â± bufferï¼‰ | 4 ç§é€‰æ‹© | âŒ ä¸å…¼å®¹ |

| é…ç½®æ¥æº | CLI args | JSON é…ç½®æ–‡ä»¶ | âŒ å·®å¼‚ |

  

---

  

## ä¸‰ä¸ªé›†æˆæ–¹æ¡ˆå¯¹æ¯”

  

### æ–¹æ¡ˆ Aï¼šä¿ç•™ç‹¬ç«‹ï¼ˆæœ€å°æ”¹åŠ¨ï¼‰

```

ç›®å½•ç»“æ„ï¼š

kline-research/projects/btc-eth-4h-cross-divergence/

â”œâ”€â”€ scripts/ï¼ˆå¤åˆ¶ï¼‰

â”‚ â”œâ”€â”€ fetch_data.py

â”‚ â”œâ”€â”€ detect_divergence.py â† ä¿æŒåŸæ ·

â”‚ â”œâ”€â”€ divergenceplus.py â† ä¿æŒåŸæ ·

â”‚ â””â”€â”€ generate_report.py

â”œâ”€â”€ config.json â† æ–°å¢ï¼ˆåŒ…è£…å¤–éƒ¨å‚æ•°ï¼‰

â”œâ”€â”€ references/ï¼ˆå¤åˆ¶ï¼‰

â”œâ”€â”€ results/ï¼ˆç©ºï¼Œä¾›è„šæœ¬è¾“å‡ºï¼‰

â””â”€â”€ chat-archive/

```

  

**ä¼˜ç‚¹**ï¼š

- âœ… divergence-detector ä¿æŒåŸæ ·ï¼Œä¸æ”¹æºç 

- âœ… å­¦ä¹ æˆæœ¬ä½ï¼ˆå‚æ•°ç»“æ„æ¸…æ™°ï¼‰

- âœ… ä¸kline-research é€šç”¨åº“æ— ä¾èµ–å†²çª

  

**ç¼ºç‚¹**ï¼š

- âŒ æ— æ³•å¤ç”¨ kline-research çš„é€šç”¨åº“ï¼ˆindicatorsã€backtest_engineï¼‰

- âŒ ä¸¤å¥—å‚æ•°ç³»ç»Ÿï¼ˆdivergence ç‹¬ç«‹ï¼Œå…¶ä»–æ¥è‡ª kline-researchï¼‰

- âš ï¸ å‚æ•°ä»éœ€ CLI argsï¼ŒJSON config åªæ˜¯è¯´æ˜æ–‡æ¡£

  

**å·¥ä½œé‡**ï¼š<4hï¼ˆä»…æ•´ç†ç›®å½•+ç¼–å†™ READMEï¼‰

  

---

  

### æ–¹æ¡ˆ Bï¼šæ·±åº¦é›†æˆåˆ° kline-researchï¼ˆå¤§æ”¹ï¼‰

```

ç»“æ„æ”¹é€ ï¼š

kline-research/src/

â”œâ”€â”€ signal_detectors.py â† æ–°å¢ detect_cross_asset_divergence()

â”œâ”€â”€ divergence_rules.py â† æ–°å¢ï¼ˆä» divergence-detector è¿ç§»ï¼‰

â””â”€â”€ backtest_strategies/

â””â”€â”€ cross_asset_divergence.py â† æ–°å¢ï¼ˆdivergenceplus é€»è¾‘ï¼‰

  

config/

â”œâ”€â”€ template.json

â””â”€â”€ cross_asset_divergence.json â† æ–°å¢ï¼ˆç»Ÿä¸€å‚æ•°ï¼‰

  

divergence-detector/ â† ä¿ç•™ä¸ºå‚è€ƒæˆ–å­˜æ¡£

```

  

**æ ¸å¿ƒæ”¹åŠ¨**ï¼š

1. é‡å†™ detect_cross_asset_divergence(primary_df, secondary_df, cfg)

2. åœ¨ backtest_engine.py æ–°å¢ sl_type="divergence_failure"

3. åœ¨ exit logic ä¸­åŠ å…¥ measured_move å’Œ rejection é€»è¾‘

4. å°†æ‰€æœ‰å‚æ•°çº³å…¥ç»Ÿä¸€ JSON é…ç½®

  

**ä¼˜ç‚¹**ï¼š

- âœ… å®Œå…¨å¤ç”¨ kline-research æ¡†æ¶ï¼ˆindicatorsã€cost handlingã€reportsï¼‰

- âœ… è·¨èµ„äº§èƒŒç¦»ä¸å…¶ä»–ç­–ç•¥å¹¶åˆ—ï¼ˆé•¿æœŸå¯æ‰©å±•ï¼‰

- âœ… å‚æ•°å®Œå…¨ JSON åŒ–ï¼ˆç®¡ç†ç»Ÿä¸€ï¼‰

  

**ç¼ºç‚¹**ï¼š

- âŒ å·¥ä½œé‡å¤§ï¼ˆéœ€æ”¹ 3+ ä¸ªæ ¸å¿ƒæ–‡ä»¶ï¼‰

- âŒ å­˜åœ¨é£é™©ï¼šä¿®æ”¹ backtest_engine å¯èƒ½å½±å“å…¶ä»–ç­–ç•¥

- âŒ è·¨èµ„äº§æ£€æµ‹å‡½æ•°ç­¾åæ”¹å˜ï¼Œå¯èƒ½ä¸å…¶ä»–ä»£ç å†²çª

  

**å·¥ä½œé‡**ï¼š2-3 å‘¨ï¼ˆéœ€å……åˆ†æµ‹è¯•ï¼‰

  

---

  

### æ–¹æ¡ˆ Cï¼šé€‚é…å±‚æ¨¡å¼ï¼ˆæ¨èï¼‰â†’ **ä¸­åº¦æ–¹æ¡ˆ**

```

ç›®å½•ç»“æ„ï¼š

divergence-detector/

â”œâ”€â”€ scripts/ï¼ˆä¸æ”¹ï¼‰

â”œâ”€â”€ config.json â† æ–°å¢ï¼ˆæ ‡å‡†åŒ–å‚æ•°ï¼‰

â”œâ”€â”€ adapter.py â† æ–°å¢ï¼ˆå…¼å®¹å±‚ï¼‰

â””â”€â”€ kline_integration.py â† æ–°å¢ï¼ˆæ¡¥æ¥åˆ° kline-researchï¼‰

  

kline-research/projects/btc-eth-4h-cross-divergence/

â”œâ”€â”€ config.json â† è½¯é“¾æ¥æˆ–å¤åˆ¶ divergence-detector/config.json

â”œâ”€â”€ README.md

â”œâ”€â”€ scripts/

â”‚ â””â”€â”€ wrapper.py â† è–„åŒ…è£…å™¨ï¼ˆè°ƒç”¨ divergence-detectorï¼‰

â”œâ”€â”€ references/ï¼ˆå¤åˆ¶ï¼‰

â”œâ”€â”€ results/ï¼ˆè„šæœ¬è¾“å‡ºï¼‰

â””â”€â”€ chat-archive/

```

  

**æ ¸å¿ƒæ€æƒ³**ï¼š

1. divergence-detector ä¿æŒåŸæ ·è¿è¡Œï¼ˆç‹¬ç«‹å·¥ä½œæµï¼‰

2. adapter.py æä¾› JSON config æ”¯æŒ + æ ‡å‡†åŒ–è¾“å‡º

3. kline-research é¡¹ç›®ä»…ä½œä¸º"ç®¡ç†ç•Œé¢"ï¼ˆè°ƒç”¨ divergence-detector adapterï¼‰

4. å…±äº«æ•°æ®æ ¼å¼ï¼ˆCSV/JSONï¼‰ï¼Œæ— ä»£ç è€¦åˆ

  

**æ”¹åŠ¨æ¸…å•**ï¼š

  

**divergence-detector/adapter.py**ï¼š

```python

def run_from_config(config_path: str):

"""ä» JSON è¯»å–å‚æ•°ï¼Œè°ƒç”¨åŸè„šæœ¬"""

cfg = load_json(config_path)

  

# è½¬æ¢ cfg â†’ CLI args

args = [

f"--swing-lookback {cfg['detection']['swing_lookback']}",

f"--max-days {cfg['detection']['max_divergence_days']}",

# ...

]

  

# è¿è¡ŒåŸè„šæœ¬ï¼ˆå¯å¤ç”¨æºç ï¼‰

results = detect_divergence_main(args)

return results

```

  

**divergence-detector/config.json**ï¼š

```json

{

"version": "1.0",

"strategy": "cross_asset_divergence",

"data": {

"primary_symbol": "BTCUSDT",

"secondary_symbol": "ETHUSDT",

"interval": "4h",

"start_date": "2021-01-01",

"end_date": "2025-02-26"

},

"detection": {

"swing_lookback": 3,

"max_divergence_days": 5,

"eth_lookback_days": 5,

"eth_match_tolerance_candles": 3,

"rejection_window": 15,

"success_threshold": 0.02

},

"backtest": {

"sl_buffer_pct": 0.1,

"rr_ratio": 2.0,

"time_stop_bars": 20,

"use_measured_move": true

},

"costs": {

"fee_pct": 0.055,

"slippage_pct": 0.05

}

}

```

  

**kline-research/projects/.../wrapper.py**ï¼š

```python

import sys

from pathlib import Path

  

# è°ƒç”¨ divergence-detector çš„ adapter

sys.path.insert(0, str(Path(__file__).parent.parent.parent.parent / "divergence-detector"))

from adapter import run_from_config

  

result = run_from_config("config.json")

# æ•°æ®å·²æ ‡å‡†åŒ–ï¼Œå¯è¿›ä¸€æ­¥å¤„ç†æˆ–è¾“å‡º

```

  

**ä¼˜ç‚¹**ï¼š

- âœ… divergence-detector é›¶æ”¹åŠ¨ï¼ˆä¿ç•™åŸæ ·ï¼‰

- âœ… JSON å‚æ•°åŒ–ï¼ˆä¾¿äºç®¡ç†å’Œå¤ç”¨ï¼‰

- âœ… æ— ä»£ç è€¦åˆï¼Œé™ä½ç»´æŠ¤æˆæœ¬

- âœ… æ•°æ®æ ¼å¼ç»Ÿä¸€ï¼ˆCSV/JSONï¼‰ï¼Œå¯åç»­é›†æˆ

- âœ… çŸ­æœŸå¯è¡Œï¼ˆ< 1 å‘¨å®Œæˆï¼‰

  

**ç¼ºç‚¹**ï¼š

- âš ï¸ ä¸¤ä¸ªé¡¹ç›®ä»é€»è¾‘åˆ†ç¦»ï¼ˆåŠŸèƒ½ä¸°å¯Œä½†éæ·±åº¦é›†æˆï¼‰

- âš ï¸ æŠ¥å‘Šç”Ÿæˆéœ€å•ç‹¬å¤„ç†ï¼ˆæˆ–ç”¨è½¬æ¢å™¨ï¼‰

  

**å·¥ä½œé‡**ï¼š1 å‘¨ï¼ˆåŒ…å« adapter + wrapper + æ–‡æ¡£ï¼‰

  

---

  

## ç”¨æˆ·æœ€ç»ˆå†³ç­– âœ“âœ“

  

| é¡¹ | å†³ç­– | ç†ç”± |

|----|------|------|

| **é›†æˆæ–¹æ¡ˆ** | **æ–¹æ¡ˆ Aï¼šä¿ç•™ç‹¬ç«‹** | æœ€å°æ”¹åŠ¨ï¼Œå¿«é€Ÿä¸Šçº¿ |

| **MODELING_RULES** | **éœ€è¦è¡¥å……éªŒè¯** | æŒ‰ RULE-1ï½RULE-10 é€æ¡æ£€è§†ï¼Œè¡¥å……ç¼ºå¤±æ–‡æ¡£ |

  

---

  

## æ–¹æ¡ˆ A çš„å…·ä½“æ‰§è¡Œè®¡åˆ’ï¼ˆæœ€ç»ˆç‰ˆï¼‰

  

### é¡¹ç›®å‘½åä¸ç›®å½•ç»“æ„

  

```

kline-research/projects/btc-eth-4h-cross-divergence/

â”œâ”€â”€ README.md â† ã€å¿…å¡«ã€‘ç­–ç•¥æ‘˜è¦ + è§„åˆ™æ€»ç»“ + å›æµ‹ç»“æœ

â”œâ”€â”€ config.json â† ã€å¿…å¡«ã€‘å‚æ•°è¯´æ˜æ–‡æ¡£ï¼ˆä¸æ˜¯è¿è¡Œæ—¶é…ç½®ï¼Œä»…è¯´æ˜ç”¨ï¼‰

â”œâ”€â”€ requirements.txt â† å¤åˆ¶è‡ª divergence-detector

â”œâ”€â”€ .gitignore â† å¤åˆ¶è‡ª divergence-detector

â”‚

â”œâ”€â”€ scripts/ â† å¤åˆ¶æ‰€æœ‰ Python è„šæœ¬ï¼ˆä¸æ”¹ï¼‰

â”‚ â”œâ”€â”€ fetch_data.py â† æ•°æ®è·å–ï¼ˆBybit APIï¼‰

â”‚ â”œâ”€â”€ detect_divergence.py â† èƒŒç¦»æ£€æµ‹å¼•æ“

â”‚ â”œâ”€â”€ generate_report.py â† Excel æŠ¥å‘Šç”Ÿæˆ

â”‚ â””â”€â”€ divergenceplus.py â† å®Œæ•´å›æµ‹ï¼ˆè¿›å‡ºåœº+é£æ§ï¼‰

â”‚

â”œâ”€â”€ references/ â† å¤åˆ¶è§„åˆ™æ–‡æ¡£

â”‚ â”œâ”€â”€ divergence-rules.md â† èƒŒç¦»æ£€æµ‹è§„åˆ™ï¼ˆçœ‹æ¶¨/çœ‹è·Œï¼‰

â”‚ â”œâ”€â”€ exit-risk-rules.md â† å‡ºåœºä¸é£æ§è§„åˆ™

â”‚ â””â”€â”€ MODELING_RULES_COMPLIANCE.md â† ã€æ–°å¢ã€‘RULE-1ï½RULE-10 éªŒè¯æ¸…å•

â”‚

â”œâ”€â”€ results/ â† è„šæœ¬è¾“å‡ºç›®å½•ï¼ˆé›†æˆååˆå§‹ä¸ºç©ºï¼‰

â”‚ â””â”€â”€ README.md â† è¯´æ˜æ­¤ç›®å½•ç”¨é€”

â”‚

â””â”€â”€ chat-archive/ â† èŠå¤©å­˜æ¡£ç³»ç»Ÿ

â”œâ”€â”€ README.md â† å­˜æ¡£è¯´æ˜ï¼ˆå¤åˆ¶æ¨¡æ¿ï¼‰

â”œâ”€â”€ INDEX.md â† å­˜æ¡£ç´¢å¼•

â””â”€â”€ 2026-02-26-divergence-integration.md â† æœ¬æ¬¡é›†æˆè®°å½•

```

  

---

  

### å¿…å¡«æ–‡ä»¶åˆ—è¡¨ä¸å†…å®¹è¦æ±‚

  

#### 1ï¸âƒ£ README.mdï¼ˆ~80 è¡Œï¼‰

  

**ç›®çš„**ï¼šé¡¹ç›®çš„"é¦–é¡µ"ï¼Œæ–°äººå¿…è¯»

  

**åŒ…å«å†…å®¹**ï¼š

```markdown

# BTC-ETH 4H è·¨è³‡ç”¢èƒŒé›¢æª¢æ¸¬å™¨

  

## ç­–ç•¥æ‘˜è¦è¡¨

| é …ç›® | å€¼ |

|-----|-----|

| æ¨™çš„ | BTC/ETH USDT æ°¸çºŒåˆç´„ (Bybit) |

| é€±æœŸ | 4H K ç·š |

| é€²å ´ä¿¡è™Ÿ | è·¨è³‡ç”¢èƒŒé›¢ + é ¸ç·šçªç ´ + æ‹’çµ•ç¢ºèª |

| å‡ºå ´è¦å‰‡ | æ­¢ç›ˆ (Measured Move) / æ­¢æ (Failure price Â± buffer) / æ™‚é–“æ­¢æ (20 æ ¹ 4H) |

| å›æ¸¬æœŸé–“ | [å¾…é‡æ–°é‹è¡Œ] |

| å‹ç‡ | [å¾…å›æ¸¬] |

| æœŸæœ›å€¼ | [å¾…å›æ¸¬] |

  

## æ ¸å¿ƒè¦å‰‡ç¸½çµ

- **èƒŒé›¢å®šç¾©**: BTC HH + ETH LH (5 å¤©å…§) â†’ å‹•èƒ½è¡°ç«­

- **é ¸ç·šçµæ§‹**: é«˜ä½é»é–“çš„æ¥µå€¼ = çµæ§‹æ”¯æ’/é˜»åŠ›

- **æ‹’çµ•ç¢ºèª**: çªç ´å¾Œåå½ˆç„¡æ³•è§¸åŠå¤±æ•—åƒ¹ â†’ ç¢ºèªä¿¡è™Ÿ

- **è³‡é‡‘ç®¡ç†**: å›ºå®š 1% é¢¨éšª + å–®ç­†å€‰ä½ä¸Šé™ 20%

  

## å¿«é€Ÿé–‹å§‹

### é¦–æ¬¡å®Œæ•´å›æ¸¬

\`\`\`bash

cd projects/btc-eth-4h-cross-divergence

pip install -r requirements.txt

  

# Step 1: æ‹‰å–å…¨é‡æ•¸æ“š (2021-01-01 è‡³ä»Šï¼Œé¦–æ¬¡ ~30ç§’)

python scripts/fetch_data.py

  

# Step 2: åµæ¸¬èƒŒé›¢ (~10ç§’)

python scripts/detect_divergence.py

  

# Step 3: ç”Ÿæˆ Excel å ±å‘Š (~5ç§’)

python scripts/generate_report.py

  

# çµæœè¼¸å‡ºåˆ° output/ ç›®éŒ„

\`\`\`

  

### æ¯é€±æ›´æ–°

\`\`\`bash

python scripts/fetch_data.py --update # å¢é‡æ‹‰å–

python scripts/detect_divergence.py # é‡æ–°åµæ¸¬

python scripts/generate_report.py # é‡æ–°ç”Ÿæˆå ±å‘Š

\`\`\`

  

## å®Œæ•´å›æ¸¬é‚è¼¯

è©³è¦‹ `references/divergence-rules.md` åŠ `references/exit-risk-rules.md`

  

## MODELING_RULES åˆè¦æ€§

è©³è¦‹ `references/MODELING_RULES_COMPLIANCE.md`

  

## èŠå¤©å­˜æª”

è©³è¦‹ `chat-archive/INDEX.md`

```

  

#### 2ï¸âƒ£ config.jsonï¼ˆèªªæ˜æ–‡æª”ï¼Œä¸æ˜¯é‹è¡Œæ™‚é…ç½®ï¼‰

  

**ç›®çš„**ï¼šè¨˜éŒ„é …ç›®çš„åƒæ•¸ï¼Œä¾¿æ–¼ CLI èª¿ç”¨æ™‚è¤‡åˆ¶

  

**æ ¼å¼**ï¼ˆJSON æ ¼å¼ï¼Œä¾¿æ–¼é–±è®€èˆ‡äº¤å‰åƒè€ƒï¼‰ï¼š

```json

{

"version": "1.0",

"strategy": "cross_asset_divergence",

"description": "BTC-ETH 4H è·¨è³‡ç”¢èƒŒé›¢æª¢æ¸¬èˆ‡å›æ¸¬",

  

"data": {

"symbol": "BTCUSDT / ETHUSDT",

"exchange": "Bybit v5 REST API",

"interval": "4h",

"start_date": "2021-01-01",

"end_date": "today",

"note": "OHLCV æ•¸æ“šä¾†è‡ªå…¬é–‹ APIï¼Œç„¡ API key éœ€æ±‚"

},

  

"detection": {

"swing_lookback": 3,

"swing_lookback_note": "å·¦å³å„ 3 æ ¹æ£’ç¢ºèª swing high/low",

  

"max_divergence_days": 5,

"max_divergence_days_note": "BTC å…©å€‹ swing point æœ€å¤š 5 å¤©ï¼Œå¦å‰‡ä¸æˆç«‹èƒŒé›¢",

  

"eth_lookback_days": 5,

"eth_lookback_days_note": "æœç´¢ ETH åŸºæº–é»çš„æ™‚é–“çª—å£",

  

"eth_match_tolerance_candles": 3,

"eth_match_tolerance_candles_note": "ETH ç¬¬äºŒé»åŒ¹é…å®¹å·® Â±3 æ ¹ 4H K ç·š",

  

"rejection_window": 15,

"rejection_window_note": "é ¸ç·šçªç ´å¾Œï¼Œç›£æ§ 15 æ ¹ 4H å…§çš„åå½ˆæ‹’çµ•",

  

"success_threshold": 0.02,

"success_threshold_note": "èƒŒé›¢ç¢ºèªå¾Œçš„å¾ŒçºŒå‹•ä½œéœ€é” 2% æ‰ç®—æˆåŠŸ"

},

  

"backtest": {

"sl_buffer_pct": 0.1,

"sl_buffer_pct_note": "æ­¢æ = failure_price Ã— (1 Â± 0.1%)",

  

"rr_ratio": 2.0,

"rr_ratio_note": "ç›ˆè™§æ¯”ï¼ˆå›ºå®š RR æˆ– measured move æ¨¡å¼ï¼‰",

  

"time_stop_bars": 20,

"time_stop_bars_note": "é€²å ´å¾Œ 20 æ ¹ 4H å¼·åˆ¶å¹³å€‰",

  

"use_measured_move": true,

"use_measured_move_note": "ä½¿ç”¨ measured move è¨ˆç®—æ­¢ç›ˆï¼Œè€Œéå›ºå®š RR"

},

  

"costs": {

"fee_pct": 0.055,

"fee_pct_note": "Maker æ‰‹çºŒè²» 0.055% (Bybit æ¨™æº–)",

  

"slippage_pct": 0.05,

"slippage_pct_note": "å‡è¨­æ»‘é» 0.05%ï¼ˆä¿å®ˆä¼°è¨ˆï¼‰",

  

"total_round_trip": "0.22%",

"total_round_trip_note": "(0.055% + 0.05%) Ã— 2 ä¾†å›"

},

  

"cli_examples": {

"default": "python scripts/detect_divergence.py",

"custom_swing": "python scripts/detect_divergence.py --swing-lookback 4 --max-days 7",

"divergenceplus": "python scripts/divergenceplus.py --rr-ratio 2.5 --time-stop-bars 24 --use-measured-move"

}

}

```

  

#### 3ï¸âƒ£ references/MODELING_RULES_COMPLIANCE.mdï¼ˆæ–°å¢ï¼Œ~100 è¡Œï¼‰

  

**ç›®çš„**ï¼šé€æ¢é©—è­‰é …ç›®æ˜¯å¦ç¬¦åˆ MODELING_RULES çš„è¦æ±‚

  

**æ ¼å¼**ï¼ˆæ¸…å–® + é©—è­‰ç‹€æ…‹ï¼‰ï¼š

  

```markdown

# MODELING_RULES åˆè¦æ€§é©—è­‰ï¼ˆv1.0ï¼‰

  

## RULE-0ï¼šåé‡‘èåƒåœ¾åŸå‰‡

- [âœ…] R0.1ï¼šéœ€æ±‚æ¸…æ¥šï¼Œæœ‰å®Œæ•´çš„è¦å‰‡æ–‡æª”

- [âœ…] R0.2ï¼šæ¯é …è¼¸å‡ºéƒ½å°æ‡‰äº¤æ˜“æ±ºç­–ï¼ˆé€²å ´/å‡ºå ´/é¢¨æ§ï¼‰

- [âœ…] R0.3ï¼šæ‰€æœ‰è¦å‰‡éƒ½é‡åŒ–æˆ if-then æ¢ä»¶

- [âœ…] R0.4ï¼šå„ªåŒ–å‹•æ©Ÿï¼šè­˜åˆ¥é«˜æ¦‚ç‡çš„èƒŒé›¢æ¨¡å¼

- [âœ…] R0.5ï¼šå›æ¸¬åŒ…å«å®Œæ•´æˆæœ¬èˆ‡å¤šæ™‚é–“æ®µé©—è­‰

  

## RULE-1ï¼šéœ€æ±‚æ¾„æ¸…è¦å‰‡ï¼ˆRequirement Clarificationï¼‰

  

| ç¶­åº¦ | å€¼ | ä¾†æº |

|-----|-----|------|

| **[C1] ç›®æ¨™å‡½æ•¸** | æœ€å¤§åŒ–å‹ç‡ & æœŸæœ›å€¼ | exit-risk-rules.md Â§3 |

| **[C2] æ¨™çš„èˆ‡å¸‚å ´** | BTCUSDT + ETHUSDT (Bybit) | divergence-rules.md Â§1 |

| **[C3] é¡†ç²’åº¦** | 4H æ³¢æ®µäº¤æ˜“ï¼ˆæ¯ç­† 16-80 å°æ™‚ï¼‰ | divergence-rules.md Â§1 |

| **[C4] é€²å ´è¦å‰‡** | èƒŒé›¢ + é¢ˆçº¿çªç ´ + æ‹’ç»ç¡®è®¤ï¼ˆ3 å±¤ç¢ºèªï¼‰| divergence-rules.md Â§2-3 |

| **[C5] å‡ºå ´è¦å‰‡** | âœ… æ­¢ç›ˆ (Measured Move) / æ­¢æ (Failure price) / æ™‚é–“æ­¢æ (20 æ ¹) | exit-risk-rules.md Â§5 |

| **[C6] äº¤æ˜“æˆæœ¬** | æ‰‹çºŒè²» 0.055% + æ»‘é» 0.05% = ç¸½ 0.22% ä¾†å› | exit-risk-rules.md Â§7 |

| **[C7] é¢¨éšªåå¥½** | å–®ç­†é¢¨éšª 1% + å–®ç­†å€‰ä½ä¸Šé™ 20% | exit-risk-rules.md Â§6 |

  

**é©—è­‰çµæœ**ï¼šâœ… C1-C7 å…¨éƒ¨è¦†è“‹

  

## RULE-2ï¼šå¸‚å ´é‚è¼¯æ‹†è§£è¦å‰‡

  

| æ¨¡çµ„ | å…§å®¹ | é©—è­‰ |

|------|------|-----|

| **[M1] å¸‚å ´ç‹€æ…‹è¾¨è­˜** | æˆç†Ÿè¶¨å‹¢ï¼ˆèƒŒé›¢ = å‹•èƒ½è¡°ç«­ï¼Œè¶¨å‹¢æœ«æœŸï¼‰ | âœ… divergence-rules.md Â§2 |

| **[M2] é€²å ´è§¸ç™¼æ¢ä»¶** | è·¨è³‡ç”¢èƒŒé›¢ + é¢ˆçº¿çªç ´ + åå½ˆæ‹’ç»ï¼ˆ3 å€‹ if-thenï¼‰ | âœ… divergence-rules.md Â§2-4 |

| **[M3] å‡ºå ´/æ­¢æ** | æ­¢ç›ˆ(MM), æ­¢æ(FP), æ™‚é–“æ­¢æ(20æ ¹) | âœ… exit-risk-rules.md Â§5 |

| **[M4] å€‰ä½ç®¡ç†** | å›ºå®š 1% é¢¨éšª + 20% å€‰ä½ä¸Šé™ | âœ… exit-risk-rules.md Â§6 |

  

**é©—è­‰çµæœ**ï¼šâœ… M1-M4 å…¨éƒ¨é‡åŒ–

  

## RULE-3ï¼šè³‡æ–™å·¥ç¨‹è¦å‰‡

  

### 3A â€” è³‡æ–™å“è³ª

- [âœ…] D1ï¼šOHLCV å°é½ UTCï¼Œç„¡æ™‚é–“æˆ³é‡è¤‡ï¼ˆfetch_data.py ç¢ºä¿ï¼‰

- [âœ…] D2ï¼šç¼ºå¤± K ç·š < 0.5%ï¼ˆBybit API å®Œæ•´ï¼Œæ­·å²å¶æœ‰æ–·æª”ä½†æ¨™è¨˜ï¼‰

- [âš ï¸] D3ï¼šæˆäº¤é‡ç•°å¸¸æœªæ¨™è¨˜ï¼ˆè„šæœ¬ç›´æ¥ä½¿ç”¨ï¼Œç„¡ç•°å¸¸è™•ç†ï¼‰

- [âœ…] D4ï¼šæ•¸æ“šç‰ˆæœ¬æ§åˆ¶ï¼ˆæ¯é€± --update è¿½åŠ æ–°æ•°æ®ï¼Œä¿ç•™æ­·å²ï¼‰

  

**æ”¹é€²éœ€æ±‚**ï¼šD3 éœ€è£œå……ç•°å¸¸å€¼ç›£æ§

  

### 3B â€” ç‰¹å¾µå·¥ç¨‹

- [âœ…] F1ï¼šæ‰€æœ‰ç‰¹å¾µåŸºæ–¼ã€Œç•¶å‰ K æ£’æ”¶ç›¤å‰ã€å·²çŸ¥æ•¸æ“šï¼ˆèƒŒé›¢æ¤œæ¸¬å…¨éƒ¨å›é¡§ï¼‰

- [âœ…] F2ï¼šä¸å­˜åœ¨ã€Œæ»¾å‹•çª—å£ã€è¶…éæ¨£æœ¬ 1/10 çš„å•é¡Œï¼ˆæª¢æ¸¬ç›´æ¥åœ¨ OHLC ä¸Šï¼‰

- [âœ…] F3ï¼šæ¨™ç±¤å°é½è¦å‰‡ï¼šrejection ç¢ºèª = å¯é€²å ´é»ï¼ˆç„¡æœªä¾†æ´©æ¼ï¼‰

- [âš ï¸] F4ï¼šç‰¹å¾µæ•¸ < 50ï¼ˆåªæœ‰ OHLCï¼Œç¬¦åˆï¼‰

- [âš ï¸] F5ï¼šç„¡å–®å…ƒæ¸¬è©¦ï¼ˆéœ€è¡¥å……ï¼‰

  

**æ”¹é€²éœ€æ±‚**ï¼šF5 éœ€è£œå……æŒ‡æ¨™å–®å…ƒæ¸¬è©¦

  

### 3C â€” è³‡æ–™é˜²æ´©æ¼æ¸…å–®

- [âœ…] ç‰¹å¾µè¨ˆç®—ä½¿ç”¨ `.shift(1)` æˆ–éå»æ•¸æ“šï¼šæ˜¯ï¼ˆæª¢æ¸¬åŸºæ–¼ swing window å›é¡§ï¼‰

- [âœ…] æ¨™æº–åŒ–åªç”¨è¨“ç·´é›† fitï¼šç„¡æ ‡å‡†åŒ–ï¼ˆåŸå§‹ OHLCï¼‰

- [âœ…] å›æ¸¬æ¯æ­¥åªçœ‹å·²çŸ¥æ•¸æ“šï¼šæ˜¯ï¼ˆrejection ç¢ºèªä½ç½®é˜²è­·ï¼‰

- [âœ…] å¤šé€±æœŸï¼šå–® 4Hï¼Œç„¡å¤šé€±æœŸæ··æ·†

  

**é©—è­‰çµæœ**ï¼šâœ… ç„¡æœªä¾†æ´©æ¼

  

## RULE-4ï¼šåŸºç·šç­–ç•¥è¦å‰‡

  

| åŸºç·š | ç­–ç•¥ | BTC æœŸé–“å ±é…¬ | æœ¬ç­–ç•¥å ±é…¬ | é€šé? |

|-----|------|-----------|---------|-------|

| B1 | Buy & Hold (2021-2025) | N/A | [å¾…å›æ¸¬] | [å¾…é©—è­‰] |

| B2 | ç°¡å–® SMA200 äº¤å‰ | ~12% (CAGR) | [å¾…å›æ¸¬] | [å¾…é©—è­‰] |

| B3 | Bollinger Breakout | ~8% (CAGR) | [å¾…å›æ¸¬] | [å¾…é©—è­‰] |

  

**æ”¹é€²éœ€æ±‚**ï¼šéœ€é‹è¡Œå®Œæ•´å›æ¸¬ï¼Œèˆ‡åŸºç·šæ¯”è¼ƒ Sharpe & MDD

  

## RULE-5ï¼šå»ºæ¨¡è¦å‰‡

  

- [âœ…] 5Aï¼šè¦å‰‡å‹ç­–ç•¥ï¼ˆif-thenï¼Œå®Œå…¨å¯è§£é‡‹ï¼‰â€” ç„¡ MLï¼Œä¸æ¶‰åŠè¤‡é›œåº¦é¸æ“‡

- [âœ…] 5Bï¼šåƒæ•¸èª¿æŸ¥ï¼šCLI args å¯å–®ç¨èª¿æ•´æ¯å€‹åƒæ•¸ï¼Œç„¡é»‘ç›’è¶…åƒæ•¸èª¿å„ª

  

## RULE-6ï¼šé©—è­‰è¦å‰‡ï¼ˆé‡é»ï¼‰

  

- [âœ…] V1ï¼šæ™‚é–“åºåˆ—åˆ‡åˆ†ï¼ˆå…¨æ¨£æœ¬ 2021-2025ï¼Œç„¡ K-Foldï¼‰

- [âš ï¸] V2ï¼šWalk-Forward Validationï¼š**æœªå¯¦ç¾** â€” éœ€è£œå……é€æœˆæˆ–é€å­£æ»¾å‹•é©—è­‰

- [âš ï¸] V3ï¼šPurged CV + Embargoï¼šä¸é©ç”¨ï¼ˆé MLï¼‰

- [âš ï¸] V4ï¼šé©—è­‰å ±å‘Šå¿…é ˆå«å¹´ä»½åˆ†æ‹†ï¼š**å¾…è£œå……** â€” éœ€æŒ‰å¹´åº¦çµ±è¨ˆ

- [âš ï¸] V5ï¼šOOS Sharpe å°æ¯”ï¼š**æœªå¯¦ç¾** â€” ç„¡è¨“ç·´/æ¸¬è©¦é›†åˆ†é›¢

  

**æ”¹é€²éœ€æ±‚**ï¼š

- å¯¦ç¾ Walk-Forwardï¼ˆä¾‹ï¼š2021-2023 è¨“ç·´ â†’ 2024 OOSï¼›2021-2024 è¨“ç·´ â†’ 2025 OOSï¼‰

- æŒ‰å¹´ä»½åˆ†æ‹†çµ±è¨ˆè¡¨

- è¨ˆç®— IS vs OOS Sharpe æ¯”è¼ƒ

  

## RULE-7ï¼šå›æ¸¬è¦å‰‡ï¼ˆç¾ç‹€ï¼‰

  

- [âœ…] BT1ï¼šæ‰‹çºŒè²» 0.055% + Slippage 0.05%ï¼ˆè„šæœ¬å¯¦ç¾ï¼‰

- [âœ…] BT2ï¼šæ»‘é»è¨­å®š 0.05%

- [âœ…] BT3ï¼šä¸å‡è¨­æ”¶ç›¤æˆäº¤ï¼ˆå¯¦éš›é€²å ´åƒ¹ = åå½ˆæ‹’ç»ç¢ºèªæ£’çš„æ”¶ç›¤ï¼‰

- [âš ï¸] BT4ï¼šå›æ¸¬æœŸé–“å¿…é ˆå« 1 ç‰› + 1 ç†Š + 1 éœ‡ï¼š2021-2025 è¦†è“‹ï¼ˆâœ… 2021 ç‰› / 2022 ç†Š / 2023-2024 å¾©ç”¦ / 2025 ç•¶å‰ï¼‰

- [âš ï¸] BT5ï¼šç¦æ­¢ã€Œåƒ…å ±å‘Šæœ€ä½³æ™‚æ®µã€ï¼šéœ€å®Œæ•´æ›²ç·š + æŒ‰å¹´ä»½åˆ†æ‹†

  

**æ”¹é€²éœ€æ±‚**ï¼šBT4 & BT5 éœ€è£œå……å®Œæ•´æ›²ç·šåœ–èˆ‡å¹´åº¦è¡¨æ ¼

  

## RULE-8ï¼šMLOps è¿½è¹¤è¦å‰‡

  

- [âŒ] OPS1ï¼šå¯¦é©—è¨˜éŒ„ä¸å®Œæ•´

- âœ… ç‰¹å¾µæ¸…å–®ï¼šå›ºå®šï¼ˆOHLC + swing pointï¼‰

- âœ… åƒæ•¸ç‰ˆæœ¬ï¼šconfig.json è¨˜éŒ„ï¼ˆç•¶å‰ v1.0ï¼‰

- âŒ è¨“ç·´/æ¸¬è©¦æ™‚é–“ç¯„åœï¼šæœªæ˜ç¢ºå®šç¾©ï¼ˆå…¨æ¨£æœ¬ 2021-2025ï¼‰

- âš ï¸ è©•ä¼°æŒ‡æ¨™ï¼šæœ‰ Sharpe/Winrateï¼Œä½†éœ€å¹´ä»½åˆ†æ‹†

  

- [âš ï¸] OPS2ï¼šæ¨¡å‹ç‰ˆæœ¬ç®¡ç†ï¼šç„¡æ­£å¼ç‰ˆæœ¬æ§åˆ¶ï¼ˆåƒ… config v1.0ï¼‰

  

- [âŒ] OPS3ï¼šå¯¦é©—å‘½åè¦ç¯„ï¼šæœªéµå¾ª

```

å»ºè­°ï¼šBTCETH_4h_cross_divergence_v1_20250226

```

  

**æ”¹é€²éœ€æ±‚**ï¼š

- å»ºç«‹å¯¦é©—æ—¥èªŒï¼ˆæ¯æ¬¡é‹è¡Œè¨˜éŒ„æ—¥æœŸ + åƒæ•¸ + çµæœï¼‰

- æ¡ç”¨å‘½åè¦ç¯„ `{assets}_{interval}_{strategy}_{version}_{date}`

- ç‰ˆæœ¬è™Ÿèˆ‡ config.json åŒæ­¥

  

## RULE-9ï¼šä¸Šç·šå‰è¦å‰‡

  

- [âš ï¸] GO1ï¼šPaper Trading è‡³å°‘ 30 å€‹äº¤æ˜“æ—¥ï¼š**æœªå¯¦æ–½** â€” æœ¬é …ç›®ç‚ºç´”å›æ¸¬

- [âš ï¸] GO2ï¼šçœŸå¯¦è³‡é‡‘å¾ â‰¤ 5% é–‹å§‹ï¼šä¸é©ç”¨

- [âš ï¸] GO3ï¼šè‡ªå‹•ç†”æ–·æ©Ÿåˆ¶ï¼š**æœªå¯¦ç¾**

- [âš ï¸] GO4ï¼šé€±ç­–ç•¥å¥åº·æª¢æŸ¥ï¼š**æœªè¨ˆåŠƒ**

- [âš ï¸] GO5ï¼šæ³¢å‹•ç‡è¶…å‡ºç¯„åœè‡ªå‹•åœæ©Ÿï¼š**æœªå¯¦ç¾**

  

**ç¾ç‹€**ï¼šé …ç›®åƒ…ç‚ºå›æ¸¬ç ”ç©¶ï¼Œéå¯¦ç›¤éƒ¨ç½²ã€‚è‹¥ä¸Šç·šéœ€è£œå……æ­¤éƒ¨åˆ†ã€‚

  

## RULE-10ï¼šè¿­ä»£è¦å‰‡

  

- [ğŸ”„] IT1ï¼šæ¯æ¬¡è¿­ä»£åªæ”¹ä¸€å€‹è®Šæ•¸ï¼šæœªå»ºç«‹æ­£å¼è¿­ä»£æµç¨‹

- [ğŸ”„] IT2ï¼šåˆ†æ”¯é©—è­‰è¦å‰‡ï¼šç„¡ç‰ˆæœ¬æ§åˆ¶åˆ†æ”¯ï¼ˆgit å»ºè­°ï¼‰

- [ğŸ”„] IT3ï¼šç­–ç•¥é€€åŒ–è§¸ç™¼ï¼šç„¡è‡ªå‹•ç›£æ§

- [ğŸ”„] IT4ï¼šæ¯å­£å®Œæ•´é‡é©—ï¼šæœªè¨ˆåŠƒ

- [ğŸ”„] IT5ï¼šé€£çºŒ 2 å­£ OOS ä¸åŠåŸºç·šï¼šç„¡è©•ä¼°

  

**æ”¹é€²éœ€æ±‚**ï¼šå»ºç«‹è¿­ä»£æ—¥èªŒèˆ‡ç‰ˆæœ¬ç®¡ç†æµç¨‹ï¼ˆè¦‹ chat-archive/ï¼‰

  

---

  

## ç¸½çµï¼šåˆè¦ç‹€æ…‹

  

| è¦å‰‡å±¤ç´š | ç‹€æ…‹ | èªªæ˜ |

|---------|------|------|

| **RULE-0 ~ RULE-5** | âœ… ç¬¦åˆ | é‚è¼¯æ¸…æ™°ï¼Œè¦å‰‡å®Œæ•´ï¼Œç„¡åƒåœ¾ |

| **RULE-6 é©—è­‰** | âš ï¸ éƒ¨åˆ† | ç¼ºå°‘ Walk-Forward å’Œå¹´ä»½åˆ†æ‹† |

| **RULE-7 å›æ¸¬** | âœ… ç¬¦åˆ | åŒ…å«æˆæœ¬ï¼Œè¦†è“‹å¤šå€‹å¸‚å ´ç’°å¢ƒ |

| **RULE-8 MLOps** | âŒ ç¼ºå¤± | ç„¡å¯¦é©—è¿½è¹¤å’Œç‰ˆæœ¬ç®¡ç† |

| **RULE-9 éƒ¨ç½²** | âš ï¸ N/A | ç•¶å‰ç‚ºç ”ç©¶é …ç›®ï¼Œéé‡å°éƒ¨ç½² |

| **RULE-10 è¿­ä»£** | âŒ ç¼ºå¤± | ç„¡æ­£å¼è¿­ä»£æµç¨‹ |

  

---

  

## æ¨è–¦æ”¹é€²å„ªå…ˆç´š

  

### çŸ­æœŸï¼ˆæœ¬æ¬¡é›†æˆï¼‰

1. âœ… RULE-6 è£œå……ï¼šæœé›†å¹´ä»½åˆ†æ‹†æ•¸æ“šï¼ˆdivergenceplus.py å·²æ”¯æŒï¼‰

2. âœ… RULE-7 è£œå……ï¼šç”Ÿæˆå®Œæ•´ç¸¾æ•ˆæ›²ç·šåœ–

3. âœ… RULE-8 åˆå§‹åŒ–ï¼šæ–°å»ºå¯¦é©—æ—¥èªŒç¯„æœ¬ï¼ˆåœ¨ chat-archive/ï¼‰

  

### ä¸­æœŸï¼ˆ1 æœˆå…§ï¼‰

4. âš ï¸ RULE-6 Walk-Forwardï¼šå¯¦ç¾é€å­£æ»¾å‹•é©—è­‰

5. âš ï¸ RULE-10 è¿­ä»£ï¼šå»ºç«‹ç‰ˆæœ¬æ§åˆ¶å’Œåƒæ•¸è®Šæ›´æ—¥èªŒ

  

### é•·æœŸï¼ˆå¿…è¦æ™‚ï¼‰

6. RULE-9 éƒ¨ç½²ï¼šè‹¥è¨ˆåŠƒå¯¦ç›¤ï¼Œè£œå……ç†”æ–· & ç›£æ§æ©Ÿåˆ¶

```

  

#### 4ï¸âƒ£ chat-archive/README.mdï¼ˆå­˜æª”èªªæ˜ï¼Œè¤‡è£½ç¯„æœ¬ï¼‰

  

```markdown

# èŠå¤©å­˜æª”ç³»çµ±

  

æ­¤ç›®éŒ„ç”¨æ–¼è¨˜éŒ„é …ç›®çš„é–‹ç™¼éç¨‹ã€æ±ºç­–é‚è¼¯å’Œå¯¦é©—æ—¥èªŒã€‚

  

## ç‚ºä»€éº¼è¦ä¿å­˜ï¼Ÿ

1. **å¯è¿½è¹¤æ€§**ï¼šæ¯å€‹åƒæ•¸æ”¹å‹•èƒŒå¾Œéƒ½æœ‰åŸå› 

2. **é¿å…é‡è¤‡å¯¦é©—**ï¼šå·²è©¦éçš„æƒ³æ³•æœ‰è¨˜éŒ„

3. **çŸ¥è­˜ç©ç´¯**ï¼šå¾ŒçºŒç ”ç©¶è€…å¯å¿«é€Ÿä¸Šæ‰‹

  

## æ–‡ä»¶ç´„å®š

- `YYYY-MM-DD-{topic}.md`ï¼šå–®æ¬¡å°è©±æª”æ¡ˆ

- æ¯å€‹é‡è¦æ±ºç­–ã€å‚æ•°èª¿æ•´ã€å›æ¸¬çµæœéƒ½è¨˜éŒ„

  

## ç´¢å¼•

è©³è¦‹ `INDEX.md`

```

  

#### 5ï¸âƒ£ chat-archive/INDEX.md

  

```markdown

# èŠå¤©å­˜æª”ç´¢å¼•

  

| æ—¥æœŸ | æª”å | æ‘˜è¦ | æ¶‰åŠåƒæ•¸ |

|-----|------|------|--------|

| 2026-02-26 | 2026-02-26-integration-plan.md | divergence-detector â†’ kline-research/projects é›†æˆè¦åŠƒ | swing_lookback, max_divergence_days, ... |

| ... | ... | ... | ... |

```

  

---

  

### å¯¦ä½œæ­¥é©Ÿï¼ˆ< 4 å°æ™‚ï¼‰

  

1. **è¤‡è£½ç›®éŒ„çµæ§‹**ï¼ˆ<5 åˆ†é˜ï¼‰

```bash

mkdir -p /Users/iruka/Downloads/wanai/kline-research/projects/btc-eth-4h-cross-divergence/{scripts,references,results,chat-archive,output}

```

  

2. **è¤‡è£½æ–‡ä»¶**ï¼ˆ<5 åˆ†é˜ï¼‰

```bash

# è¤‡è£½è„šæœ¬

cp /Users/iruka/Downloads/wanai/divergence-detector/scripts/*.py \

/Users/iruka/Downloads/wanai/kline-research/projects/btc-eth-4h-cross-divergence/scripts/

  

# è¤‡è£½è¦å‰‡æ–‡æª”

cp /Users/iruka/Downloads/wanai/divergence-detector/references/*.md \

/Users/iruka/Downloads/wanai/kline-research/projects/btc-eth-4h-cross-divergence/references/

  

# è¤‡è£½ä¾è³´

cp /Users/iruka/Downloads/wanai/divergence-detector/requirements.txt \

/Users/iruka/Downloads/wanai/kline-research/projects/btc-eth-4h-cross-divergence/

```

  

3. **ç·¨å¯« README.md**ï¼ˆ~40 åˆ†é˜ï¼‰

- ç­–ç•¥æ‘˜è¦è¡¨

- å¿«é€Ÿé–‹å§‹æŒ‡å—

- MODELING_RULES é€£çµ

  

4. **ç·¨å¯« config.json**ï¼ˆ~20 åˆ†é˜ï¼‰

- è¨˜éŒ„æ‰€æœ‰ CLI åƒæ•¸

- æ·»åŠ èªªæ˜è¨»é‡‹

  

5. **ç·¨å¯« MODELING_RULES_COMPLIANCE.md**ï¼ˆ~60 åˆ†é˜ï¼‰

- é€æ¢é©—è­‰

- æ–°å¢å¾…æ”¹é€²æ¸…å–®

  

6. **åˆå§‹åŒ– chat-archive/**ï¼ˆ~20 åˆ†é˜ï¼‰

- README.md

- INDEX.md

- æœ¬æ¬¡é›†æˆè¨˜éŒ„æª”æ¡ˆ

  

---

  

## é›†æˆå¾Œçš„é©—è­‰æ¸…å–®

  

- [ ] ç›®éŒ„çµæ§‹å®Œæ•´ï¼ˆscripts/, references/, results/, chat-archive/ï¼‰

- [ ] README.md æ¸…æ™°æ˜“è®€ï¼Œæ–°äººå¯è‡ªåŠ©ä¸Šæ‰‹

- [ ] config.json åŒ…å«æ‰€æœ‰åƒæ•¸èªªæ˜ï¼ˆä¾¿æ–¼è¤‡æŸ¥å’Œèª¿æ•´ï¼‰

- [ ] references/MODELING_RULES_COMPLIANCE.md å®Œæ•´ä¸”å¯è¿½è¹¤

- [ ] chat-archive/INDEX.md è¨˜éŒ„æœ¬æ¬¡é›†æˆ

- [ ] scripts/ å…§æ‰€æœ‰ .py å¯ç›´æ¥åŸ·è¡Œï¼ˆpip install -r requirements.txtï¼‰

- [ ] requirements.txt ç‰ˆæœ¬è™Ÿæ­£ç¢º

- [ ] results/ ç›®éŒ„å°±ç·’ï¼ˆç­‰å¾…é¦–æ¬¡åŸ·è¡Œè¼¸å‡ºï¼‰

  

---

  

## é›†æˆå®Œæˆå¾Œçš„ä¸‹ä¸€æ­¥ï¼ˆéæœ¬æ¬¡ä»»å‹™ï¼‰

  

1. **åŸ·è¡Œé¦–æ¬¡å®Œæ•´å›æ¸¬**

```bash

cd projects/btc-eth-4h-cross-divergence

python scripts/fetch_data.py # æ‹‰æ•¸æ“š

python scripts/detect_divergence.py # æª¢æ¸¬èƒŒé›¢

python scripts/generate_report.py # ç”Ÿæˆå ±å‘Š

python scripts/divergenceplus.py # å®Œæ•´å›æ¸¬

```

  

2. **æŒ‰ RULE-6 è£œå……é©—è­‰**

- æ”¶é›†å¹´ä»½åˆ†æ‹†è¡¨

- è£œå…… Walk-Forward é©—è­‰

- æ›´æ–° MODELING_RULES_COMPLIANCE.md

  

3. **æäº¤ git è¨˜éŒ„**

```bash

git add kline-research/projects/btc-eth-4h-cross-divergence/

git commit -m "Integrate cross-asset divergence detector into kline-research projects"

```

  

---

  

## é›†æˆæ–¹æ¡ˆæ¡†æ¶ï¼ˆå¾…ç¡®è®¤ï¼‰

  

åŸºäºç°æœ‰ä¿¡æ¯ï¼Œé›†æˆæµç¨‹é¢„å®šå¦‚ä¸‹ï¼ˆå…·ä½“æ­¥éª¤å¾…ç”¨æˆ·ç¡®è®¤ï¼‰ï¼š

  

### æ­¥éª¤ 1ï¼šåˆ›å»ºç›®å½•ç»“æ„

```

kline-research/projects/btc-eth-4h-cross-divergence/

â”œâ”€â”€ README.md # æ–°å»ºï¼šç ”ç©¶æ‘˜è¦ï¼ˆå«è§„åˆ™+ç»“æœæ‘˜è¦ï¼‰

â”œâ”€â”€ config.json # æ–°å»ºï¼šç¬¦åˆtemplate.jsonæ ¼å¼çš„é…ç½®

â”œâ”€â”€ requirements.txt # å¤åˆ¶ï¼šPythonä¾èµ–

â”œâ”€â”€ scripts/ # æ–°å»ºï¼šæ•´ç†ç°æœ‰4ä¸ªè„šæœ¬

â”‚ â”œâ”€â”€ fetch_data.py

â”‚ â”œâ”€â”€ detect_divergence.py

â”‚ â”œâ”€â”€ generate_report.py

â”‚ â””â”€â”€ divergenceplus.py

â”œâ”€â”€ references/ # æ–°å»ºï¼šå¤åˆ¶è§„åˆ™æ–‡æ¡£

â”‚ â”œâ”€â”€ divergence-rules.md

â”‚ â””â”€â”€ exit-risk-rules.md

â”œâ”€â”€ output/ # æ–°å»ºï¼šè„šæœ¬è¿è¡Œçš„ä¸´æ—¶è¾“å‡º

â”œâ”€â”€ results/ # æ–°å»ºï¼šæœ€ç»ˆå›æµ‹ç»“æœ

â”‚ â””â”€â”€ ï¼ˆå­˜æ”¾æ ‡å‡†åŒ–çš„æŠ¥å‘Šï¼‰

â””â”€â”€ chat-archive/ # æ–°å»ºï¼šèŠå¤©å­˜æ¡£ç³»ç»Ÿ

â”œâ”€â”€ README.md # å­˜æ¡£è¯´æ˜

â”œâ”€â”€ INDEX.md # ç´¢å¼•è¡¨

â””â”€â”€ 2026-02-26_divergence-integration.md # æœ¬æ¬¡é›†æˆè®°å½•

```

  

### æ­¥éª¤ 2ï¼šåˆ›å»º README.md

åŒ…å«è¦ç´ ï¼š

- ç­–ç•¥æ‘˜è¦è¡¨ï¼ˆæ ‡çš„ã€å‘¨æœŸã€è¿›å‡ºåœºï¼‰

- divergence-rules.md çš„æ ¸å¿ƒè§„åˆ™å¼•ç”¨

- exit-risk-rules.md çš„é£æ§å‚æ•°æ€»ç»“

- å›æµ‹ç»“æœæ‘˜è¦ï¼ˆå‹ç‡ã€æœŸæœ›å€¼ã€æœ€å¤§å›æ’¤ï¼‰

- ç»§ç»­ç ”ç©¶çš„æŒ‡å¯¼ï¼ˆå¦‚ä½•ä¿®æ”¹å‚æ•°ã€è°ƒç”¨è„šæœ¬ï¼‰

  

### æ­¥éª¤ 3ï¼šåˆ›å»º config.json

- å‚è€ƒ config/template.json çš„ç»“æ„

- æ–°å¢ç‰¹å®šå­—æ®µï¼šdivergence ç›¸å…³å‚æ•°ï¼ˆswing_lookback, max_divergence_days ç­‰ï¼‰

- æŒ‡å®š data sourceï¼ˆBybit v5 APIï¼‰

- å‡ºåœºè§„åˆ™é…ç½®ï¼ˆSL/TP/TimeStopï¼‰

  

### æ­¥éª¤ 4ï¼šåˆ›å»º chat-archive

- æ–°å»º chat-archive/INDEX.mdï¼ˆè·Ÿè¸ªæ‰€æœ‰å¼€å‘è®°å½•ï¼‰

- åˆ›å»ºæœ¬æ¬¡é›†æˆå¯¹è¯çš„å­˜æ¡£æ–‡ä»¶

  

### æ­¥éª¤ 5ï¼šå¯é€‰è¡¥å……

- è¡¥å…… RULE-8 çš„ MLOps è¿½è¸ªè®°å½•ï¼ˆæ¨¡å‹ç‰ˆæœ¬ã€å®éªŒæ—¥å¿—ï¼‰

- å¦‚éœ€ RULE-9 çš„ä¸Šçº¿å‰æ£€æŸ¥ï¼Œåˆ›å»ºå¯¹åº”æ–‡æ¡£

  

---

  

## éªŒè¯æ–¹æ³•

  

é›†æˆå®Œæˆåï¼ŒéªŒè¯æ¸…å•ï¼š

- [ ] æ–°é¡¹ç›®ç›®å½•ç»“æ„å®Œæ•´

- [ ] README.md èƒ½æ¸…æ™°æ€»ç»“ç­–ç•¥é€»è¾‘å’Œç»“æœ

- [ ] config.json æœ‰æ•ˆä¸”æ‰€æœ‰å¿…å¡«å­—æ®µå®Œæ•´

- [ ] scripts/ ä¸­æ‰€æœ‰è„šæœ¬å¯ç›´æ¥è¿è¡Œï¼ˆä¾èµ–å£°æ˜æ­£ç¡®ï¼‰

- [ ] chat-archive/ å­˜æ¡£å®Œæ•´å¯æŸ¥

- [ ] å¯¹åº” MODELING_RULES çš„æœ€å°‘è§„èŒƒï¼ˆRULE-1ï½RULE-7ï¼‰

  

---

  

## å¾…å†³ç­–äº‹é¡¹

ğŸ”´ ç”¨æˆ·éœ€ç¡®è®¤ä»¥ä¸‹ 5 ä¸ªé—®é¢˜åæ‰èƒ½è¿›è¡Œé›†æˆ